import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,o as a,b as e}from"./app-NwmlIrjp.js";const i={},t=e(`<h2 id="ubuntu" tabindex="-1"><a class="header-anchor" href="#ubuntu"><span>Ubuntu</span></a></h2><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h3><p><strong>基本安装</strong></p><ol><li>Windows功能中开启<code>适用于Linux的Windows子系统</code>+<code>虚拟机平台</code></li><li>powershell终端输入<code>wsl.exe --update</code>更新WSL相关组件</li><li>在微软商店安装最新稳定版本 Ubuntu 22.04</li></ol><hr><p><strong>迁移到其它盘符</strong></p><ol><li><code>wsl -l -v</code>查看目前已安装的Linux发行版本</li><li><code>wsl --export Ubuntu-22.04 D:\\Ubuntu\\init.tar</code>导出安装好的Ubuntu-22.04为tar文件到D盘的Ubuntu下</li><li><code>wsl --import Ubuntu-22.04 D:\\Ubuntu\\Ubuntu-22.04 D:\\Ubuntu\\init.tar --version 2</code>以WSL2为版本利用tar文件把系统安装在D:\\Ubuntu\\Ubuntu-22.04文件夹下并以Ubuntu-22.04来命名</li></ol><hr><p><strong>图形化界面</strong></p><ol><li><p>切换安装源</p><p>备份系统默认源文件</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">cp</span> /etc/apt/sources.list /etc/apt/sources.list.bak
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>切换为清华源，替换全部文件内容</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">vim</span> /etc/apt/sources.list
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span>
 
deb http://security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse
<span class="token comment"># deb-src http://security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse</span>
 
<span class="token comment"># 预发布软件源，不建议启用</span>
<span class="token comment"># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span>
<span class="token comment"># # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>添加 bionic universe 源以正确安装 vnc4server，在文件末尾追加内容</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">vim</span> /etc/apt/sources.list
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>deb http://archive.ubuntu.com/ubuntu/ bionic universe
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>安装该仓库的公钥</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> apt-key adv <span class="token parameter variable">--keyserver</span> keyserver.ubuntu.com --recv-keys 3B4FE6ACC0B21F32
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>更新安装源列表</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token parameter variable">-y</span> upgrade
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>安装所需软件</p><p>安装轻量版Ubuntu图形界面</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> xfce4
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>安装配置 xfce4 终端</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> xfce4-terminal
<span class="token builtin class-name">echo</span> xfce4-session<span class="token operator">&gt;</span>.xsession
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>安装 xrdp 相关（通过远程桌面来访问图形界面）</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> vnc4server
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> xrdp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>配置 xrdp 启动脚本，在文件开头插入内容，否则会黑屏</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">vim</span> /etc/xrdp/startwm.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">unset</span> <span class="token environment constant">DBUS_SESSION_BUS_ADDRESS</span>
<span class="token builtin class-name">unset</span> <span class="token environment constant">XDG_RUNTIME_DIR</span>
<span class="token builtin class-name">.</span> <span class="token environment constant">$HOME</span>/.profile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重启xrdp</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">service</span> xrdp restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>查看xrdp的运行状态和监听接口</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">service</span> xrdp status
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>默认的端口是 3389</li><li>远程连接前要关闭xrdp状态，否则会闪退</li><li>远程连接前WSL Ubuntu命令行需要打开，否则xrdp服务不会运行</li></ul></li><li><p>远程桌面连接</p><p>打开Windows的远程桌面连接</p><ul><li>计算机名： IP地址:端口号</li><li>用户名： 初次进入WSL Ubuntu系统时设置的用户名</li></ul></li></ol><hr><p><strong>安装基础软件包</strong></p><p>更新系统上的所有软件包</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> upgrade <span class="token parameter variable">-y</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>基本的工具：构建工具、版本控制系统、文本编辑器……</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> build-essential <span class="token function">curl</span> <span class="token function">git</span> <span class="token function">vim</span> <span class="token function">wget</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>增强终端体验：Zsh、Oh My Zsh</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">zsh</span>
<span class="token function">sh</span> <span class="token parameter variable">-c</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh<span class="token variable">)</span></span>&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>在终端中管理多个会话：tmux</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> tmux
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>监视系统资源使用情况：htop</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">htop</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,22),l=[t];function d(u,c){return a(),n("div",null,l)}const o=s(i,[["render",d],["__file","wsl.html.vue"]]),v=JSON.parse('{"path":"/basic/Linux/wsl.html","title":"WSL","lang":"zh-CN","frontmatter":{"title":"WSL","shortTitle":"WSL","description":"WSL","date":"2024-06-13T12:52:01.000Z","categories":["Linux"],"tags":["WSL"]},"headers":[{"level":2,"title":"Ubuntu","slug":"ubuntu","link":"#ubuntu","children":[{"level":3,"title":"安装","slug":"安装","link":"#安装","children":[]}]}],"git":{"createdTime":null,"updatedTime":null,"contributors":[]},"readingTime":{"minutes":2.47,"words":740},"filePathRelative":"basic/Linux/wsl.md","localizedDate":"2024年6月13日"}');export{o as comp,v as data};
